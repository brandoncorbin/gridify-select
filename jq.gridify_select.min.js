$.fn.gridify_select=function(){return this.each(function(){var menu_max_height=300;var select=$(this);var button=$('<div class="btn-group"><button class="btn dropdown-toggle" data-toggle="dropdown"><span class="title">'+$("option",select).eq(select.prop("selectedIndex")).text()+'</span> <span class="caret"></span></button><ul class="dropdown-menu"><li><div class="table-container" style="max-height:'+menu_max_height+'px; overflow-y:scroll; overflow-x:hidden;"></div></li></ul></div>');var table=$('<table class="table table-hover"></table>');
$("option",this).each(function(i){var fieldtxt=$(this).html();var fields=fieldtxt.split("\t");var row=$('<tr data-index="'+i+'" style="cursor:pointer"></tr>');$(fields).each(function(i){row.append("<td>"+fields[i]+"</td>")});$(row).click(function(){$("option",select).attr("selected",false);$("tr",table).removeClass("info");$(this).addClass("info");$("option",select).eq($(this).attr("data-index")).attr("selected",true).addClass("active");$("span.title",button).html($("option",select).eq($(this).attr("data-index")).html())});
table.append(row)});$(".dropdown-menu .table-container",button).append(table);select.on("change",function(){$("tr",table).removeClass("info");$("tr",table).eq(index).addClass("info");$("span.title",button).html($("option",select).eq(select.prop("selectedIndex")).html())});select.after(button).hide()})};